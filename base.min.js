!function(r,e){"use strict";function a(r,e){for(var a=new Array(r.length<<1>>>0),t=0,n=0;t<r.length;++t)a[n++]=e[r[t]>>>4&15],a[n++]=e[15&r[t]];return a}function t(r,e){if(1&r.length)throw new Error("Wrong size of base16 final chunk.");for(var a=new Array(r.length>>>1),t=0,n=0;t+2<=r.length;t+=2){var o=e[127&r.charCodeAt(t)],c=e[127&r.charCodeAt(t+1)];if(o<0||c<0)throw new Error("Out of base16 character range. [offset="+t+"]");a[n++]=o<<4|c}return a}function n(r,e){for(var a=new Array(Math.ceil(r.length/5)<<3>>>0),t=0,n=0;t+5<=r.length;t+=5){var o=r[t],c=r[t+1],h=r[t+2],f=r[t+3],s=r[t+4];a[n++]=e[o>>>3&31],a[n++]=e[(7&o)<<2|c>>>6&3],a[n++]=e[c>>>1&31],a[n++]=e[(1&c)<<4|h>>>4&15],a[n++]=e[(15&h)<<1|f>>>7&1],a[n++]=e[f>>>2&31],a[n++]=e[(3&f)<<3|s>>>5&7],a[n++]=e[31&s]}if(r.length-t!=0){switch(r.length-t){case 1:a[n++]=e[r[t]>>>3&31],a[n++]=e[(7&r[t])<<2];break;case 2:a[n++]=e[r[t]>>>3&31],a[n++]=e[(7&r[t])<<2|r[t+1]>>>6&3],a[n++]=e[r[t+1]>>>1&31],a[n++]=e[(1&r[t+1])<<4];break;case 3:a[n++]=e[r[t]>>>3&31],a[n++]=e[(7&r[t])<<2|r[t+1]>>>6&3],a[n++]=e[r[t+1]>>>1&31],a[n++]=e[(1&r[t+1])<<4|r[t+2]>>>4&15],a[n++]=e[(15&r[t+2])<<1];break;case 4:a[n++]=e[r[t]>>>3&31],a[n++]=e[(7&r[t])<<2|r[t+1]>>>6&3],a[n++]=e[r[t+1]>>>1&31],a[n++]=e[(1&r[t+1])<<4|r[t+2]>>>4&15],a[n++]=e[(15&r[t+2])<<1|r[t+3]>>>7&1],a[n++]=e[r[t+3]>>>2&31],a[n++]=e[(3&r[t+3])<<3];break;default:throw new Error("Wrong size of base32 final chunk.")}for(var u=n;u<a.length;++u)a[u]=x}return a}function o(r,e){for(var a=new Array(5*(r.length>>>3)),t=0,n=0;t+8<=r.length;t+=8){var o=e[127&r.charCodeAt(t)],c=e[127&r.charCodeAt(t+1)],h=e[127&r.charCodeAt(t+2)],f=e[127&r.charCodeAt(t+3)],s=e[127&r.charCodeAt(t+4)],u=e[127&r.charCodeAt(t+5)],i=e[127&r.charCodeAt(t+6)],d=e[127&r.charCodeAt(t+7)];if(o<0||c<0||h<0||f<0||s<0||u<0||i<0||d<0)throw new Error("Out of base32 character range. [offset="+t+"]");a[n++]=o<<3|c>>>2,a[n++]=(3&c)<<6|h<<1|f>>>4,a[n++]=(15&f)<<4|s>>>1,a[n++]=(1&s)<<7|u<<2|i>>>3,a[n++]=(7&i)<<5|d}if(r.length-t!=0)switch(r.length-t){case 2:if(o=e[127&r.charCodeAt(t)],c=e[127&r.charCodeAt(t+1)],o<0||c<0)throw new Error("Out of base32 character range. [offset="+(r.length-t)+"]");a[n++]=o<<3|c>>>2;break;case 4:if(o=e[127&r.charCodeAt(t)],c=e[127&r.charCodeAt(t+1)],h=e[127&r.charCodeAt(t+2)],f=e[127&r.charCodeAt(t+3)],o<0||c<0||h<0||f<0)throw new Error("Out of base32 character range. [offset="+(r.length-t)+"]");a[n++]=o<<3|c>>>2,a[n++]=(3&c)<<6|h<<1|f>>>4;break;case 5:if(o=e[127&r.charCodeAt(t)],c=e[127&r.charCodeAt(t+1)],h=e[127&r.charCodeAt(t+2)],f=e[127&r.charCodeAt(t+3)],s=e[127&r.charCodeAt(t+4)],o<0||c<0||h<0||f<0||s<0)throw new Error("Out of base32 character range. [offset="+(r.length-t)+"]");a[n++]=o<<3|c>>>2,a[n++]=(3&c)<<6|h<<1|f>>>4,a[n++]=(15&f)<<4|s>>>1;break;case 7:if(o=e[127&r.charCodeAt(t)],c=e[127&r.charCodeAt(t+1)],h=e[127&r.charCodeAt(t+2)],f=e[127&r.charCodeAt(t+3)],s=e[127&r.charCodeAt(t+4)],u=e[127&r.charCodeAt(t+5)],i=e[127&r.charCodeAt(t+6)],o<0||c<0||h<0||f<0||s<0||u<0||i<0)throw new Error("Out of base32 character range. [offset="+(r.length-t)+"]");a[n++]=o<<3|c>>>2,a[n++]=(3&c)<<6|h<<1|f>>>4,a[n++]=(15&f)<<4|s>>>1,a[n++]=(1&s)<<7|u<<2|i>>>3;break;default:throw new Error("Wrong size of base32 final chunk.")}return a}function c(r,e){for(var a=new Array(Math.ceil(r.length/3)<<2>>>0),t=0,n=0;t+3<=r.length;t+=3){var o=r[t],c=r[t+1],h=r[t+2];a[n++]=e[o>>>2&63],a[n++]=e[(3&o)<<4|c>>>4&15],a[n++]=e[(15&c)<<2|h>>>6&3],a[n++]=e[63&h]}if(r.length-t!=0){switch(r.length-t){case 1:a[n++]=e[r[t]>>>2&63],a[n++]=e[(3&r[t])<<4];break;case 2:a[n++]=e[r[t]>>>2&63],a[n++]=e[(3&r[t])<<4|r[t+1]>>>4&15],a[n++]=e[(15&r[t+1])<<2];break;default:throw new Error("Wrong size of base64 final chunk.")}for(var f=n;f<a.length;++f)a[f]=x}return a}function h(r,e){for(var a=new Array(3*(r.length>>>2)),t=0,n=0;t+4<=r.length;t+=4){var o=e[127&r.charCodeAt(t)],c=e[127&r.charCodeAt(t+1)],h=e[127&r.charCodeAt(t+2)],f=e[127&r.charCodeAt(t+3)];if(o<0||c<0||h<0||f<0)throw new Error("Out of base64 character range. [offset="+t+"]");a[n++]=o<<2|c>>>4,a[n++]=(15&c)<<4|h>>>2,a[n++]=(3&h)<<6|f}if(r.length-t!=0)switch(r.length-t){case 2:if(o=e[127&r.charCodeAt(t)],c=e[127&r.charCodeAt(t+1)],o<0||c<1)throw new Error("Out of base64 character range. [offset="+(r.length-t)+"]");a[n++]=o<<2|c>>>4;break;case 3:if(o=e[127&r.charCodeAt(t)],c=e[127&r.charCodeAt(t+1)],h=e[127&r.charCodeAt(t+2)],o<0||c<0||h<0)throw new Error("Out of base64 character range. [offset="+(r.length-t)+"]");a[n++]=o<<2|c>>>4,a[n++]=(15&c)<<4|h>>>2;break;default:throw new Error("Wrong size of base64 final chunk.")}return a}function f(r){for(var e=0,a=0,t=0;t<r.length;++t)a=r.charCodeAt(t),e+=a>=55296&&a<=56319?++t>=r.length?0:4:a<=127?1:a<=2047?2:3;for(var n=new Array(e),t=0,o=0;t<r.length;++t){if(a=r.charCodeAt(t),a>=56320&&a<=57343)throw new Error("Encounter an unpaired surrogate. [char="+a+"]");if(a>=55296&&a<=56319){if(++t>=r.length)throw new Error("Encounter an unpaired surrogate. [char="+a+"]");var c=r.charCodeAt(t);if(c<56320||c>57343)throw new Error("Encounter an unpaired surrogate. [char="+a+", tail="+c+"]");a=((1023&a)<<10|1023&c)+65536}a<=127?n[o++]=a:a<=2047?(n[o++]=(a>>>6)+192,n[o++]=(63&a)+128):a<=65535?(n[o++]=(a>>>12)+224,n[o++]=(a>>>6&63)+128,n[o++]=(63&a)+128):(n[o++]=(a>>>18)+240,n[o++]=(a>>>12&63)+128,n[o++]=(a>>>6&63)+128,n[o++]=(63&a)+128)}return n}function s(r){for(var e=0,a=0,t=0;t<r.length;++t)a=r[t],e+=a<=127?1:240==(240&a)?(t+=3)>=r.length?0:2:224==(224&a)?(t+=2)>=r.length?0:1:192==(192&a)?(t+=1)>=r.length?0:1:0;for(var n=new Array(e),o=0,t=0,c=0;t<r.length;++t){if(a=r[t],a>=128){if(a<194||a>244)throw new Error("Invaild utf-8 character. [offset="+t+", char="+a+"]");if(240==(240&a))c=t+3,a=7&a;else if(224==(224&a))c=t+2,a=15&a;else{if(192!=(192&a))throw new Error("Invaild utf-8 character. [offset="+t+", char="+a+"]");c=t+1,a=31&a}if(c>=r.length)throw new Error("Encounter an unpaired surrogate. [char="+a+"]");for(;t+1<=c;){var h=r[++t];if(h<128||h>191)throw new Error("Invaild utf-8 trialing character. [offset="+t+", char="+a+"]");a=a<<6|63&h}}if(a>=55296&&a<=57343)throw new Error("Encounter an unpaired surrogate. [char="+a+"]");a>=65536?(n[o++]=(a>>10)+55232,n[o++]=(1023&a)+56320):n[o++]=a}return n}function u(r){return String.fromCharCode.apply(null,r)}function i(r){return r.replace(O,"")}function d(r,e){switch(e.toLowerCase()){case"hex":case"base16":return u(a(f(r),w));case"base32":return u(n(f(r),A));case"base32hex":case"base32-hex":return u(n(f(r),C));case"base64":return u(c(f(r),v));case"base64-urlsafe":case"base64urlsafe":case"base64-url":case"base64url":return u(c(f(r),p));default:throw new Error("Unknow codec algorithms.")}}function l(r,e){switch(e.toLowerCase()){case"hex":case"base16":return u(s(t(r,g)));case"base32":return u(s(o(i(r),b)));case"base32hex":case"base32-hex":return u(s(o(i(r),E)));case"base64":return u(s(h(i(r),k)));case"base64-urlsafe":case"base64urlsafe":case"base64-url":case"base64url":return u(s(h(i(r),y)));default:throw new Error("Unknow codec algorithms.")}}var w=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102],g=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],A=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,50,51,52,53,54,55],b=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],C=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86],E=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],v=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],k=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],p=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,45,95],y=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],x=61,O=/=+$/;"function"==typeof define&&define.amd?define(function(){return{encode:d,decode:l}}):"undefined"!=typeof exports?(exports.encode=d,exports.decode=l):(r.encode=d,r.decode=l)}("undefined"==typeof window?this:window);